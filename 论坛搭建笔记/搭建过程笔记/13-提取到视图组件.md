# 13-提取到视图组件
1.注意到在threads/create.blade.php中使用了`App\Channel::all()`来获取所有channel的数组，现在可以把它放在视图组件里传值，在AppServiceProvider.php的boot中添加：

```
\View::composer('threads.create', function($view){
    $view->with('channels', \App\Channel::all());
});
```
这样做之后，就可以在create中直接使用`$channels`。
参考[视图合成器](d.laravel-china.org/docs/5.4/views.html#视图合成器)

2.上面的`$channels`只在threads/create里面可以使用，如果希望所有的视图都可以使用它，可以使用`*`，参考[将视图合成器附加到多个视图](d.laravel-china.org/docs/5.4/views.html#将视图合成器附加到多个视图)：

```
\View::composer('*', function($view){
    $view->with('channels', \App\Channel::all());
});
```
或者还可以使用`share`，参考[把数据共享给所有视图](d.laravel-china.org/docs/5.4/views.html#把数据共享给所有视图)：

```
\View::share('channels', \App\Channel::all());
```
两者效果相同，不过使用share的时候，数据不会传递到测试中去，所以这个时候执行测试会发现数据库错误，为了能够在测试中使用，最好使用前面的composer。


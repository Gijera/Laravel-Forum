# 10-如何测试表单的验证错误
1.`$this->post()->headers->get('Location')`为在响应中的头信息里获取Location变量，在php里面有一条跳转语句：`header('Location: /xxxx')`，所以Location变量里面的值应该就是该页面的url。

2.`$this->post('/threads', $thread)
            ->assertSessionHasErrors('title');`
关于[断言](d.laravel-china.org/docs/5.4/http-tests.html#可用的断言方法)，`$response->assertSessionHasErrors(array $keys);`断言该 session 包含指定字段的错误信息。
            
3.帮助测试类publishThread

```
/**
 * @test
 */
function a_thread_requires_a_title(){
    $this->publishThread(['title' => null])
        ->assertSessionHasErrors('title');
}

/**
 * @test
 */
function a_thread_requires_a_body(){
    $this->publishThread(['body' => null])
        ->assertSessionHasErrors('body');
}

function publishThread($overrides = []){
    $this->withExceptionHandling()->signIn();

    $thread = make('App\Thread', $overrides);

    return $this->post('/threads', $thread->toArray());
}
```

4.验证channel在数据中已经存在

```
$this->validate($request, [
    'title' => 'required',
    'body' => 'required',
    'channel_id' => 'required|exists:channels,id'
]);
```


